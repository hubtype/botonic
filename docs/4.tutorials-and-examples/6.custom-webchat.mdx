---
name: 4. Custom Webchat
route: /tutorials-and-examples/custom-webchat
menu: 4. Tutorials & Examples
---

import { NextButton } from '../components/nextButton.tsx'
import { PrevButton } from '../components/prevButton.tsx'

# **Custom Webchat**

[View on Github](https://github.com/hubtype/botonic/tree/master/packages/botonic-cli/templates/custom-webchat)

This template shows how to create custom elements for webchat. All the custom components are stored inside the folder webchat, in `src/webchat`.

**src/webchat/index.js**

```javascript
export const webchat = {
  theme: {},

  persistentMenu: [],

  blockInputs: [],

  // Webchat listeners
  onInit: app => {},
  onOpen: app => {},
  onClose: app => {},
  onMessage: app => {}
}
```

See above a template with Webchat allowed definitions. With them you can configure the following (see detailed examples below):
- **theme**: It defines the styles.
- **persistentMenu**: Optionally, a persistent menu can be accessed from a little button at the input text box. It allows the user to access popular functionalities at any point in the conversation.
- **blockInputs**: This permits you to define which user inputs will not be allowed. E.g., it's useful for preventing the user to type a credit card.
- **Listeners**: Listeners are useful in order to react to some events when using the webchat.  

Let's see how we can use these objects:

## theme

These are the available styles that Botonic allows you to modify:
### General Styling
- **style**: the main characteristics of webchat such as its size, its background color...
* **triggerButtonImage**: launcher icon for toggling the webchat.
- **triggerButtonStyle**: launcher icon styles.
* **brandColor**: the main color palette of the webchat widget.
- **brandImage**: this will set an image for both `headerImage` and `botMessageImage`.
* **headerImage**: the image displayed in the header. Overwrites the one set in brandImage. You can set it to `null` to disable it.
- **headerTitle**: display title of the webchat.
* **headerSubtitle**: display subtitle of the webchat.
- **botMessageImage**: the image displayed next to the bot's chat bubble. Overwrites the one set in brandImage. You can set it to `null` to disable it.
* **botMessageStyle**: styles of bot message.
- **userMessageStyle**: styles of user message.
* **introImage**: an introductory image shown the first time the conversation is initialized.
- **introStyle**: styles of the introductory image.
* **textPlaceholder**: text placeholder in the input text.
- **alignReplies**: align replies at `left`, `center` or `right`.
* **wrapReplies**: whether replies be displayed on a single row `no-wrap` (horizontal scrolling will appear when required) or they will be wrapped in different lines `wrap`.

### Custom components
You can also create your own components from scratch.
* **customIntro:** React component that is injected where introImage is displayed.
- **customTrigger:** React component that is injected in the Launcher icon.
* **customHeader:** React Component that is injected in the Header of the widget.
- **customReply:** React Component that is injected in the Reply components of the widget.
* **customButton:** React Component that is injected in the Button components of the widget.

> **NOTE**: Custom components redefine completely the components that are replacing, so the styles conflicting with these components will be overridden.  

### Custom Message Styles
Additionally, you can create the kind of messages you desire. Check the example below to see how to create one: 
* **customMessageTypes:** Array of React components representing your messages.

**src/webchat/calendar-message.js**

```javascript
import React from 'react'
import { WebchatContext, customMessage } from '@botonic/react'
import Calendar from 'react-calendar'

class CalendarMessage extends React.Component {
  static contextType = WebchatContext

  render() {
    return (
      <>
        <Calendar
          onChange={date =>
            this.context.sendText(`Booked for ${date.toLocaleDateString()}`)
          }
        />
        <p>{this.props.children}</p>
      </>
    )
  }
}

export default customMessage({
  name: 'calendar',
  component: CalendarMessage
})
```

## Custom Compononent Examples

In this example, we are putting css styles into a custom quickreply.
It's very important to put `{props.children}` inside the container, in this case the `<div>` tag:


**src/webchat/custom-reply.js**

```javascript
import React from 'react'

export const CustomReply = props => (
  <div
    style={{
      color: '#0000ff',
      border: '2px solid #0000ff',
      backgroundColor: 'white',
      borderRadius: 30,
      padding: 8,
      cursor: 'pointer'
    }}
  >
    {props.children}
  </div>
)
```
This is an example of a custom Header for our webchat. We can put all the fancy css styles we want.
This is a static object, so it's not applied in any [components](/main-concepts/components) component, so we don't have to put `{props.children}` inside any container.


**src/webchat/custom-header.js**

```javascript
import launcherIcon from '../assets/launcher-logo.png'
import IntroImage from '../assets/intro-image.jpg'
import C3POLogo from '../assets/c3po-logo.png'
import R2D2Logo from '../assets/r2d2-logo.png'
import CalendarMessage from './calendar-message'
import { CustomTrigger } from './custom-trigger'
import { CustomHeader } from './custom-header'
import { CustomIntro } from './custom-intro'
import { CustomReply } from './custom-reply'
import { CustomButton } from './custom-button'

export const webchat = {
  theme: {
    // GENERAL STYLE OF WEBCHAT
    style: {
      position: 'fixed',
      right: 20,
      bottom: 20,
      width: 400,
      height: 500,
      margin: 'auto',
      backgroundColor: 'white',
      borderRadius: '25px',
      boxShadow: '0 0 50px rgba(0,0,255,.30)',
      overflow: 'hidden',
      backgroundImage:
        'linear-gradient(to top, #ffffff,#ffffff 11%,#9a9ae3 40%,#0000ff 85%,#0000ff 85%)'
    },
    triggerButtonImage: launcherIcon,
    brandColor: '#0000ff',
    /*
     * brandImage will set both headerImage and botMessageImage with its current logo
     * you can overwrite these values by redefining them individually
     */
    brandImage: R2D2Logo,
    botMessageImage: C3POLogo, // set it to 'null' to hide the botMessageImage
    // headerImage: R2D2Logo, // set it to 'null' to hide the headerImage
    introImage: IntroImage,
    introStyle: {
      padding: 20
    },
    // headerTitle: 'My customized webchat',
    // headerSubtitle: 'R2D2',
    textPlaceholder: 'Type something...',
    botMessageStyle: {
      border: 'none',
      color: 'blue',
      borderRadius: '20px'
    },
    userMessageStyle: {
      // border:'none',
      color: 'white',
      borderRadius: '10px'
    },
    alignReplies: 'center',
    wrapReplies: 'wrap',
    triggerButtonStyle: {
      width: '200px'
    },

    // CUSTOM MESSAGES
    customMessageTypes: [CalendarMessage],

    // REACT CUSTOMIZABLE COMPONENTS: Remember that these components will overwrite any style for the component they are replacing
    /* Uncomment the other lines to see the rest of React components  */
    // customTrigger: CustomTrigger
    customHeader: CustomHeader,
    // customIntro: CustomIntro,
    // customButton: CustomButton,
    customReply: CustomReply
  }
}
```


All these changes can be tested using the `botonic serve` command *(npm run start on Windows)*. This is how it looks:

<img
  src="https://botonic-doc-static.netlify.com/images/webchat_example.png"
  style={{ display: 'block', margin: 'auto', maxWidth: '40%' }}
/>

## Persistent Menu
By adding these few lines of code in webchat's object, you can enable the persistent menu:

```javascript
persistentMenu: [
    { label: 'Help', payload: 'help' },
    {
      label: 'See docs',
      url: 'https://docs.botonic.io'
    }
  ]
```

<img
  src="https://botonic-doc-static.netlify.com/images/webchat_persistent_menu.png"
  style={{ display: 'block', margin: 'auto', maxWidth: '50%' }}
/>

_Example of the Persistent Menu_

The persistent menu accepts the same properties as a Botonic Button, this is `payload` and `url`.
## Block Inputs
Sometimes you would want to not allow certain messages for security reasons or to avoid agressive words. You can block these inputs as follows:

```javascript
blockInputs: [
    {
      match: [/ugly/, /bastard/],
      message: 'We cannot tolerate these kind of words.'
    }
  ]
```
<img
  src="https://botonic-doc-static.netlify.com/images/webchat_block_inputs.png"
  style={{ display: 'block', margin: 'auto', maxWidth: '25%' }}
/>


_Example of blocking inputs_

Once the specified inputs are matched:
* The user input will not be displayed in the message history.
* The configured message will appear.
* The bot will not receive the blocked message.


> We suggest you to check the full template which offers a bunch of examples to get started customizing the Webchat components.  

<div style={{display:"flex", justifyContent:"space-between"}}>
  <PrevButton title="Dynamic Carousel" href="/tutorials-and-examples/dynamic-carousel" />
  <NextButton title="Testing Your Components" href="/tutorials-and-examples/testing-your-components" />
</div>